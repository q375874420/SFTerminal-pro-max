---
import { useTranslations, type Lang } from '../i18n/utils';
import { defaultLanguage } from '../i18n/translations';

interface Props {
  lang?: Lang;
}

const { lang = defaultLanguage } = Astro.props;
const t = useTranslations(lang);
const useCases = t.useCases.items;

// 图标映射
const iconMap: Record<string, string> = {
  server: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="28" height="28">
    <path d="M5.25 14.25h13.5m-13.5 0a3 3 0 01-3-3m3 3a3 3 0 100 6h13.5a3 3 0 100-6m-16.5-3a3 3 0 013-3h13.5a3 3 0 013 3m-19.5 0a4.5 4.5 0 01.9-2.7L5.737 5.1a3.375 3.375 0 012.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 01.9 2.7m0 0a3 3 0 01-3 3m0 3h.008v.008h-.008v-.008zm0-6h.008v.008h-.008v-.008zm-3 6h.008v.008h-.008v-.008zm0-6h.008v.008h-.008v-.008z"/>
  </svg>`,
  code: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="28" height="28">
    <path d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"/>
  </svg>`,
  database: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="28" height="28">
    <path d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"/>
  </svg>`,
  shield: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="28" height="28">
    <path d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/>
  </svg>`,
  book: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="28" height="28">
    <path d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"/>
  </svg>`,
  users: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="28" height="28">
    <path d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"/>
  </svg>`,
};
---

<section id="use-cases" class="use-cases">
  <div class="container">
    <h2 class="section-title fade-in">{t.useCases.title}</h2>
    <p class="section-subtitle fade-in fade-in-delay-1">
      {t.useCases.subtitle}
    </p>
    
    <div class="use-cases-grid">
      {useCases.map((useCase, index) => (
        <div class={`use-case-card fade-in fade-in-delay-${(index % 3) + 1}`}>
          <div class="use-case-header">
            <div class="use-case-icon" set:html={iconMap[useCase.icon]} />
            <div class="use-case-info">
              <h3 class="use-case-role">{useCase.role}</h3>
              <p class="use-case-description">{useCase.description}</p>
            </div>
          </div>
          <ul class="use-case-scenarios">
            {useCase.scenarios.map(scenario => (
              <li>
                <span class="scenario-icon">✓</span>
                {scenario}
              </li>
            ))}
          </ul>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .use-cases {
    position: relative;
    padding: var(--spacing-section) 0;
    background: var(--color-bg-primary);
  }
  
  .use-cases::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--color-border), transparent);
  }
  
  .use-cases-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }
  
  .use-case-card {
    position: relative;
    padding: 28px;
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .use-case-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--color-accent-primary), var(--color-accent-secondary));
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .use-case-card:hover {
    border-color: var(--color-border-hover);
    transform: translateY(-4px);
    box-shadow: var(--shadow-glow);
  }
  
  .use-case-card:hover::before {
    opacity: 1;
  }
  
  .use-case-header {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    margin-bottom: 20px;
  }
  
  .use-case-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    min-width: 48px;
    background: linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(59, 130, 246, 0.15));
    border-radius: var(--radius-md);
    color: var(--color-accent-primary);
  }
  
  .use-case-info {
    flex: 1;
  }
  
  .use-case-role {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 6px;
    color: var(--color-text-primary);
  }
  
  .use-case-description {
    font-size: 14px;
    color: var(--color-text-secondary);
    line-height: 1.5;
  }
  
  .use-case-scenarios {
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  .use-case-scenarios li {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    color: var(--color-text-secondary);
    padding: 8px 0;
    border-bottom: 1px solid var(--color-border);
  }
  
  .use-case-scenarios li:last-child {
    border-bottom: none;
    padding-bottom: 0;
  }
  
  .scenario-icon {
    color: var(--color-accent-primary);
    font-weight: bold;
    font-size: 12px;
  }
  
  @media (max-width: 1024px) {
    .use-cases-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  @media (max-width: 768px) {
    .use-cases-grid {
      grid-template-columns: 1fr;
    }
    
    .use-case-card {
      padding: 24px;
    }
  }
</style>
